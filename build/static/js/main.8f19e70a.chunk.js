(this["webpackJsonpfinding-nora"]=this["webpackJsonpfinding-nora"]||[]).push([[0],{26:function(e,t,n){e.exports=n(49)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(18),o=n.n(r),c=n(0),s=n.n(c),l=n(8),i=n(7),u=n(5),m=n(10),d=n(9),g=(n(37),n(4)),f=n(2),p=n.n(f);n(38);function h(e){let{children:t,className:n,isSecondary:a,testId:r}=e,o=Object(g.a)(e,["children","className","isSecondary","testId"]);return s.a.createElement("button",Object.assign({className:p()("button",{secondary:a},n),"data-testid":r},o),t)}n(39);const E=({children:e})=>c.createElement("div",{className:"grid"},e);E.Item=e=>{let{children:t,green:n,orange:a,red:r,falldown:o,slideouttop:s,className:l,onClick:i}=e,u=Object(g.a)(e,["children","green","orange","red","falldown","slideouttop","className","onClick"]);const m=p()("grid-item",{falldown:o},{slideouttop:s},{red:r},{green:n},{orange:a},{className:l});function d(e){e.preventDefault(),i()}return c.createElement(h,Object.assign({onMouseDown:d,onTouchStart:d,className:m},u),t)};var v=E;n(40);function y({className:e,children:t}){return c.createElement("div",{className:"overlay"},c.createElement("div",{className:p()("overlay-content slide-in-top",e)},t))}n(41);function w({onClose:e}){return c.createElement(y,{className:"about-page"},c.createElement("p",null,"Game created by ",c.createElement("a",{href:"https://koenvangilst.nl"},"Koen van Gilst")),c.createElement("p",null,"Extensive beta testing by my kids"," ",c.createElement("span",{role:"img","aria-label":"two emoji monkeys"},"\ud83d\udc35\ud83d\udc35")),c.createElement("p",null,"Source code on"," ",c.createElement("a",{href:"https://github.com/vnglst/finding-nora"},"Github")),c.createElement("small",null,"v","4.3.0"," git: ","ba184b1"),c.createElement(h,{onClick:e},"Back"))}function b({setPage:e,restart:t}){return c.createElement(y,null,c.createElement(h,{onMouseDown:()=>{t(),e("home")},testId:"new-game-restart"},"New game"),c.createElement(h,{isSecondary:!0,onMouseDown:()=>{e("home")},testId:"new-game-resume"},"Resume game"))}n(42);function N(e){let{className:t,valid:n}=e,a=Object(g.a)(e,["className","valid"]);const r=p()("my-input",{valid:n},{invalid:!n},t);return c.createElement("input",Object.assign({className:r},a))}function S(e){return e.length>=4&&e.length<=9}function O({addSolution:e,restart:t,reset:n,setPage:a}){const[r,o]=c.useState("NORA");return c.createElement(y,null,c.createElement("p",null,"Finding..."),c.createElement(N,{type:"text",valid:S(r),name:"solution",maxLength:9,value:r,placeholder:"NORA",onChange:e=>{const t=e.currentTarget.value.toUpperCase();o(t)}}),c.createElement("span",null,c.createElement(h,{disabled:!S(r),onClick:()=>{e(r),t(),a("home")},testId:"settings-add"},"Add"),c.createElement(h,{isSecondary:!0,onClick:()=>{n(),a("home")},testId:"settings-reset"},"Reset")))}n(43);function k({className:e,imageSrc:t,children:n}){return c.createElement("div",{className:p()("background",e),style:{backgroundImage:"url('".concat(t,"')")}},n)}n(44),n(45);const A=({children:e,value:t,onChange:n})=>{const a=c.Children.map(e,(e,a)=>{if(!c.isValidElement(e))return null;const r=e.props,o=void 0===r.value?a:r.value;return c.cloneElement(e,{onChange:n,selected:o===t,value:o})});return c.createElement("div",{className:"bottom-bar"},a)};A.Item=function(e){let{value:t,label:n,onChange:a=(()=>{}),icon:r,selected:o}=e,s=Object(g.a)(e,["value","label","onChange","icon","selected"]);const l=p()("item",{"item-selected":o});return c.createElement("button",Object.assign({className:l,onMouseDown:()=>a(t)},s),r,n&&c.createElement("p",{className:"label"},n))};var _=A;let C;!function(e){e.Correct="Correct",e.Wrong="Wrong",e.AlmostCorrect="AlmostCorrect"}(C||(C={}));var R=n(25);const D=()=>Math.random();function I(e){return Math.floor(D()*e)}function W(e){return e[Math.floor(D()*e.length)]}function T(e){return JSON.parse(JSON.stringify(e))}const j=e=>e[0].map((t,n)=>e.map(e=>e[n])),M=e=>T(e).reverse(),L=e=>M(j(e)),G="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function J(e,t){const n=[];for(let m=0;m<e;m++){const t=[];for(let n=0;n<e;n++){const e=W(G);t.push({row:m,column:n,letter:e})}n.push(t)}function a(e,t,n){return n-e+n-t-1}const r=a(0,0,e),o=t.length;if(o>r)throw new Error("Puzzle too long");let c=I(e),s=I(e),l=0;for(;l<500;){if(o<=a(c,s,e))break;c=I(e),s=I(e),l++}let i=c,u=s;for(const m of t){n[i][u].letter=m;const t=[];if(i+1<e&&t.push({row:i+1,column:u}),u+1<e&&t.push({row:i,column:u+1}),t.length>0){const e=W(t);i=e.row,u=e.column}}return function(e){const t=W([e=>e,M,L]);return function(e){e.forEach((t,n)=>t.map((t,a)=>e[n][a]=Object(R.a)({},t,{column:a,row:n})))}(e=t(e)),e}(n)}function U(e,t){const n=e.length,a=[],r=[[-1,0],[0,-1],[0,1],[1,0]];for(let c=0;c<n;c++)for(let r=0;r<n;r++){const n=e[c][r],s=[];n.letter===t[0]&&o(n,0,s,a)}function o(a,c,s,l){if(c>t.length||a.letter!==t[c])return;const i=[...s,a];if(c===t.length-1)return l.push(i),l;r.forEach(t=>{const r=a.row+t[0],s=a.column+t[1];if(!function(e,t,n){return e>=0&&e<n&&t>=0&&t<n}(r,s,n))return;const u=e[r][s];(function(e,t){let n=!0;return e.forEach(e=>{var a,r;a=t,r=e,JSON.stringify(a)===JSON.stringify(r)&&(n=!1)}),n})(i,u)&&o(u,c+1,i,l)})}return a}function q(e,t){return e.filter(e=>{const n=e[0];return n.row===t.row&&n.column===t.column})}n(46);var P=n(20),x=n.n(P);const Y=i.c;var z=n(21);const B=(()=>{const e="https://raw.githubusercontent.com/vnglst/finding-nora/master/public/sounds/",t={};return[{id:"squakk",mp3:e+"squakk.mp3"},{id:"euh",mp3:e+"euh.mp3"},{id:"nock",mp3:e+"nock.mp3"},{id:"hooyeah",mp3:e+"hooyeah.mp3"},{id:"restart",mp3:e+"restart.mp3"}].forEach(e=>{t[e.id]=new z.Howl({src:[e.mp3]})}),t})(),F=V(localStorage);V(sessionStorage);function V(e){let t={};function n(){try{const t="__some_random_key_to_test_if_storage_is_supported__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return!1}}return{getItem:function(a){return n()?e.getItem(a):Object.prototype.hasOwnProperty.call(t,a)?t[a]:null},setItem:function(a,r){n()?e.setItem(a,r):t[a]=String(r)},removeItem:function(a){n()?e.removeItem(a):delete t[a]},clear:function(){n()?e.clear():t={}},key:function(a){return n()?e.key(a):Object.keys(t)[a]||null},length:0}}var X=n(22);const H=["Nora","Tibo","Emma","Mila","Sophie","Zo\xeb","Julia","Tess","Sara","Anna","Evi","Saar","Noah","Daan","Lucas","Levi","Sem","Finn","Liam","James","Milan","Luuk"].map(e=>e.toUpperCase()),K=(e=0,t=H)=>{const n=J(5,t[e]);return{current:e,questions:t,grid:n,solutions:U(n,t[e]),remaining:t[e]}};var Q=n(23),Z=n.n(Q),$=n(24),ee=n.n($);const te=Z()("eb9c66e47f7f95c5801a21ffe1308619");te.use(ee.a,c);const ne=te.getPlugin("react");function ae(e){return te.notify(e)}const re=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function oe(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}n(48);const ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,se=Object(u.d)((function(e=K(),t){return Object(X.a)(e,e=>{switch(t.type){case"CORRECT_ANSWER":{const n=t.payload;e.grid[n.row][n.column].status=C.Correct,e.solutions=q(e.solutions,n),e.solutions.forEach(e=>e.shift()),e.remaining=e.remaining.substr(1);break}case"ADD_ALMOST":{const{row:n,column:a}=t.payload;e.grid[n][a].status=C.AlmostCorrect;break}case"ADD_WRONG":{const{row:n,column:a}=t.payload;e.grid[n][a].status=C.Wrong;break}case"RESTART":{const{current:t,questions:n}=e;return K(t,n)}case"NEW_GAME":{const{current:t,questions:n}=e,a=t<n.length-1?t+1:0;return K(a,n)}case"RESET":return K();case"ADD_ANSWER":e.questions.splice(e.current,0,t.payload);break;default:return e}})}),function(){try{const e=F.getItem("finding-nora"),t=e?JSON.parse(e):null,n=t?t.current:void 0,a=t?t.questions:void 0;return K(n,a)}catch(e){return console.error(e),ae(e),K()}}(),ce(Object(u.a)(()=>e=>t=>{const n=e(t);switch(t.type){case"RESTART":return B.restart.play(),n;case"ADD_WRONG":return B.squakk.play(),n;case"CORRECT_ANSWER":return B.nock.play(),n;case"ADD_ALMOST":return B.euh.play(),n;case"YOU_WON":return B.hooyeah.play(),n;default:return n}},({getState:e})=>t=>n=>{const a=t(n),r=e();switch(n.type){case"YOU_WON":case"RESTART":case"NEW_GAME":case"RESET":case"ADD_ANSWER":return function(e){try{const t=JSON.stringify({questions:e.questions,current:e.current});F.setItem("finding-nora",t)}catch(t){return console.error(t),ae(t),null}}(r),a;default:return a}})));l.render(c.createElement(ne,null,c.createElement(i.a,{store:se},c.createElement((function(){const[e,t]=Object(c.useState)("home"),n=Object(i.b)(),a=Y(e=>e.grid),r=Y(e=>e.remaining),o=Y(e=>e.solutions),l=Y(e=>0===e.remaining.length);return s.a.createElement(k,{imageSrc:"https://res.cloudinary.com/vnglst/image/upload/f_auto/v1537882150/festen.jpg"},s.a.createElement("div",{className:"app"},s.a.createElement("h1",null,r),s.a.createElement(v,null,a.map((e,t)=>e.map((e,a)=>s.a.createElement(v.Item,{key:"".concat(t,"-").concat(a),onClick:()=>function(e){if(e.status===C.Correct)return;if(q(o,e).length>0)return n(function(e){return{type:"CORRECT_ANSWER",payload:e}}(e)),void(r.length<=1&&n({type:"YOU_WON"}));o.find(t=>t.find(t=>t.column===e.column&&t.row===e.row))?n(function(e){return{type:"ADD_ALMOST",payload:e}}(e)):n(function(e){return{type:"ADD_WRONG",payload:e}}(e))}(e),falldown:e.status===C.Wrong,red:e.status===C.Wrong,green:e.status===C.Correct,orange:e.status===C.AlmostCorrect,"data-testid":"grid-item-".concat(t,"-").concat(a)},e.letter)))),s.a.createElement(_,{value:e,onChange:t},s.a.createElement(_.Item,{"aria-label":"New game",value:"new-game",label:"New game",icon:s.a.createElement(d.a,{icon:m.c})}),s.a.createElement(_.Item,{"aria-label":"Settings",value:"settings",label:"Add name",icon:s.a.createElement(d.a,{icon:m.a})}),s.a.createElement(_.Item,{"aria-label":"About this app",value:"about",label:"About",icon:s.a.createElement(d.a,{icon:m.b})})),"new-game"===e&&s.a.createElement(b,{setPage:t,restart:()=>n({type:"NEW_GAME"})}),"settings"===e&&s.a.createElement(O,{addSolution:e=>n({type:"ADD_ANSWER",payload:e}),restart:()=>n({type:"RESTART"}),reset:()=>n({type:"RESET"}),setPage:t}),"about"===e&&s.a.createElement(w,{onClose:()=>{t("home")}}),l&&"home"===e&&s.a.createElement(s.a.Fragment,null,s.a.createElement(x.a,null),s.a.createElement(y,null,s.a.createElement("p",null,"YOU WON"),s.a.createElement(h,{onMouseDown:()=>{n({type:"NEW_GAME"})},testId:"play-again"},"Play again?")))))}),null))),document.getElementById("root")),o()({delay:500}),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");re?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):oe(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):oe(e)})}}(),Object(a.a)(window,"UA-135954444-1",{serviceUrls:["https://analytics.koenvangilst.nl/track","https://www.google-analytics.com/collect"],anonymizeIp:!0,colorDepth:!0,characterSet:!0,screenSize:!0,language:!0})}},[[26,1,2]]]);
//# sourceMappingURL=main.8f19e70a.chunk.js.map